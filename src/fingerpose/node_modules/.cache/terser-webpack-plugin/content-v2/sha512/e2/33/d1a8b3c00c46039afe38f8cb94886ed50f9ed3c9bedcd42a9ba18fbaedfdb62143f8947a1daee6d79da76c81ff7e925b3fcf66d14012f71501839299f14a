{"code":"!function(t,i){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define([],i):\"object\"==typeof exports?exports.fp=i():t.fp=i()}(\"undefined\"!=typeof self?self:this,(function(){return function(t){var i={};function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var a in t)e.d(n,a,function(i){return t[i]}.bind(null,a));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=0)}([function(t,i,e){\"use strict\";e.r(i);var n={};e.r(n),e.d(n,\"VictoryGesture\",(function(){return u})),e.d(n,\"ThumbsUpGesture\",(function(){return h})),e.d(n,\"HiGesture\",(function(){return g})),e.d(n,\"YesGesture\",(function(){return D})),e.d(n,\"TestGesture\",(function(){return C}));const a={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:\"Thumb\",1:\"Index\",2:\"Middle\",3:\"Ring\",4:\"Pinky\"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(t){return void 0!==typeof this.nameMapping[t]&&this.nameMapping[t]},getPoints:function(t){return void 0!==typeof this.pointsMapping[t]&&this.pointsMapping[t]}},r={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:\"No Curl\",1:\"Half Curl\",2:\"Full Curl\"},getName:function(t){return void 0!==typeof this.nameMapping[t]&&this.nameMapping[t]}},o={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:\"Vertical Up\",1:\"Vertical Down\",2:\"Horizontal Left\",3:\"Horizontal Right\",4:\"Diagonal Up Right\",5:\"Diagonal Up Left\",6:\"Diagonal Down Right\",7:\"Diagonal Down Left\"},getName:function(t){return void 0!==typeof this.nameMapping[t]&&this.nameMapping[t]}};class l{constructor(t){this.options={HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6,...t}}estimate(t){let i=[],e=[];for(let n of a.all){let r=a.getPoints(n),o=[],l=[];for(let i of r){let e=t[i[0]],n=t[i[1]],a=this.getSlopes(e,n),r=a[0],d=a[1];o.push(r),l.push(d)}i.push(o),e.push(l)}let n=[],r=[];for(let e of a.all){let o=e==a.Thumb?1:0,l=a.getPoints(e),d=t[l[o][0]],s=t[l[o+1][1]],u=t[l[3][1]],c=this.estimateFingerCurl(d,s,u),h=this.calculateFingerDirection(d,s,u,i[e].slice(o));n[e]=c,r[e]=h}return{curls:n,directions:r}}getSlopes(t,i){let e=this.calculateSlope(t[0],t[1],i[0],i[1]);return 2==t.length?e:[e,this.calculateSlope(t[1],t[2],i[1],i[2])]}angleOrientationAt(t,i=1){let e=0,n=0,a=0;return t>=75&&t<=105?e=1*i:t>=25&&t<=155?n=1*i:a=1*i,[e,n,a]}estimateFingerCurl(t,i,e){let n=t[0]-i[0],a=t[0]-e[0],o=i[0]-e[0],l=t[1]-i[1],d=t[1]-e[1],s=i[1]-e[1],u=t[2]-i[2],c=t[2]-e[2],h=i[2]-e[2],p=Math.sqrt(n*n+l*l+u*u),g=Math.sqrt(a*a+d*d+c*c),f=Math.sqrt(o*o+s*s+h*h),D=(f*f+p*p-g*g)/(2*f*p);D>1?D=1:D<-1&&(D=-1);let m,C=Math.acos(D);return C=57.2958*C%180,m=C>this.options.NO_CURL_START_LIMIT?r.NoCurl:C>this.options.HALF_CURL_START_LIMIT?r.HalfCurl:r.FullCurl,m}estimateHorizontalDirection(t,i,e,n){let a;return a=n==Math.abs(t)?t>0?o.HorizontalLeft:o.HorizontalRight:n==Math.abs(i)?i>0?o.HorizontalLeft:o.HorizontalRight:e>0?o.HorizontalLeft:o.HorizontalRight,a}estimateVerticalDirection(t,i,e,n){let a;return a=n==Math.abs(t)?t<0?o.VerticalDown:o.VerticalUp:n==Math.abs(i)?i<0?o.VerticalDown:o.VerticalUp:e<0?o.VerticalDown:o.VerticalUp,a}estimateDiagonalDirection(t,i,e,n,a,r,l,d){let s,u=this.estimateVerticalDirection(t,i,e,n),c=this.estimateHorizontalDirection(a,r,l,d);return s=u==o.VerticalUp?c==o.HorizontalLeft?o.DiagonalUpLeft:o.DiagonalUpRight:c==o.HorizontalLeft?o.DiagonalDownLeft:o.DiagonalDownRight,s}calculateFingerDirection(t,i,e,n){let a=t[0]-i[0],r=t[0]-e[0],o=i[0]-e[0],l=t[1]-i[1],d=t[1]-e[1],s=i[1]-e[1],u=Math.max(Math.abs(a),Math.abs(r),Math.abs(o)),c=Math.max(Math.abs(l),Math.abs(d),Math.abs(s)),h=0,p=0,g=0,f=c/(u+1e-5);f>1.5?h+=this.options.DISTANCE_VOTE_POWER:f>.66?p+=this.options.DISTANCE_VOTE_POWER:g+=this.options.DISTANCE_VOTE_POWER;let D=Math.sqrt(a*a+l*l),m=Math.sqrt(r*r+d*d),C=Math.sqrt(o*o+s*s),M=Math.max(D,m,C),U=t[0],L=t[1],R=e[0],T=e[1];M==D?(R=e[0],T=e[1]):M==C&&(U=i[0],L=i[1]);let b,V=[U,L],y=[R,T],_=this.getSlopes(V,y),N=this.angleOrientationAt(_,this.options.TOTAL_ANGLE_VOTE_POWER);h+=N[0],p+=N[1],g+=N[2];for(let t of n){let i=this.angleOrientationAt(t,this.options.SINGLE_ANGLE_VOTE_POWER);h+=i[0],p+=i[1],g+=i[2]}return b=h==Math.max(h,p,g)?this.estimateVerticalDirection(d,l,s,c):g==Math.max(p,g)?this.estimateHorizontalDirection(r,a,o,u):this.estimateDiagonalDirection(d,l,s,c,r,a,o,u),b}calculateSlope(t,i,e,n){let a=(i-n)/(t-e),r=180*Math.atan(a)/Math.PI;return r<=0?r=-r:r>0&&(r=180-r),r}}class d{constructor(t){this.name=t,this.curls={},this.directions={},this.weights=[1,1,1,1,1],this.weightsRelative=[1,1,1,1,1]}addCurl(t,i,e){void 0===this.curls[t]&&(this.curls[t]=[]),this.curls[t].push([i,e])}addDirection(t,i,e){void 0===this.directions[t]&&(this.directions[t]=[]),this.directions[t].push([i,e])}setWeight(t,i){this.weights[t]=i;let e=this.weights.reduce((t,i)=>t+i,0);this.weightsRelative=this.weights.map(t=>5*t/e)}matchAgainst(t,i){let e=0;for(let i in t){let n=t[i],a=this.curls[i];if(void 0!==a){for(const[t,r]of a)if(n==t){e+=r*this.weightsRelative[i];break}}else e+=this.weightsRelative[i]}for(let t in i){let n=i[t],a=this.directions[t];if(void 0!==a){for(const[i,r]of a)if(n==i){e+=r*this.weightsRelative[t];break}}else e+=this.weightsRelative[t]}return e}}const s=new d(\"okey\");s.addCurl(a.Thumb,r.HalfCurl,.5),s.addCurl(a.Thumb,r.NoCurl,.5),s.addDirection(a.Thumb,o.VerticalUp,1),s.addDirection(a.Thumb,o.DiagonalUpLeft,1),s.addCurl(a.Index,r.NoCurl,1),s.addDirection(a.Index,o.VerticalUp,.75),s.addDirection(a.Index,o.DiagonalUpLeft,1),s.addCurl(a.Middle,r.NoCurl,1),s.addDirection(a.Middle,o.VerticalUp,1),s.addDirection(a.Middle,o.DiagonalUpLeft,.75),s.addCurl(a.Ring,r.FullCurl,1),s.addDirection(a.Ring,o.VerticalUp,.2),s.addDirection(a.Ring,o.DiagonalUpLeft,1),s.addDirection(a.Ring,o.HorizontalLeft,.2),s.addCurl(a.Pinky,r.FullCurl,1),s.addDirection(a.Pinky,o.VerticalUp,.2),s.addDirection(a.Pinky,o.DiagonalUpLeft,1),s.addDirection(a.Pinky,o.HorizontalLeft,.2),s.setWeight(a.Index,2),s.setWeight(a.Middle,2);var u=s;const c=new d(\"good\");c.addCurl(a.Thumb,r.NoCurl,1),c.addDirection(a.Thumb,o.VerticalUp,1),c.addDirection(a.Thumb,o.DiagonalUpLeft,.25),c.addDirection(a.Thumb,o.DiagonalUpRight,.25);for(let t of[a.Index,a.Middle,a.Ring,a.Pinky])c.addCurl(t,r.FullCurl,1),c.addDirection(t,o.HorizontalLeft,1),c.addDirection(t,o.HorizontalRight,1);var h=c;const p=new d(\"hi\");p.addCurl(a.Thumb,r.NoCurl,1),p.addDirection(a.Thumb,o.VerticalUp,1),p.addDirection(a.Thumb,o.DiagonalUpRight,.75),p.addCurl(a.Index,r.NoCurl,1),p.addDirection(a.Index,o.VerticalUp,1),p.addDirection(a.Index,o.DiagonalUpRight,.75),p.addCurl(a.Middle,r.NoCurl,1),p.addDirection(a.Middle,o.VerticalUp,1),p.addDirection(a.Middle,o.DiagonalUpRight,.5),p.addDirection(a.Middle,o.DiagonalUpLeft,.5),p.addCurl(a.Ring,r.NoCurl,1),p.addDirection(a.Ring,o.DiagonalUpLeft,.75),p.addDirection(a.Ring,o.VerticalUp,.5),p.addCurl(a.Pinky,r.NoCurl,1),p.addDirection(a.Pinky,o.DiagonalUpLeft,1),p.addDirection(a.Pinky,o.VerticalUp,.2);var g=p;const f=new d(\"yes\");f.addCurl(a.Thumb,r.HalfCurl,.5),f.addCurl(a.Thumb,r.NoCurl,.5),f.addDirection(a.Thumb,o.VerticalUp,1),f.addDirection(a.Thumb,o.DiagonalUpLeft,1),f.addCurl(a.Index,r.NoCurl,1),f.addDirection(a.Index,o.VerticalUp,.75),f.addDirection(a.Index,o.DiagonalUpLeft,1),f.addCurl(a.Middle,r.NoCurl,1),f.addDirection(a.Middle,o.VerticalUp,1),f.addDirection(a.Middle,o.DiagonalUpLeft,.75),f.addCurl(a.Ring,r.FullCurl,1),f.addDirection(a.Ring,o.VerticalUp,.2),f.addDirection(a.Ring,o.DiagonalUpLeft,1),f.addDirection(a.Ring,o.HorizontalLeft,.2),f.addCurl(a.Pinky,r.FullCurl,1),f.addDirection(a.Pinky,o.VerticalUp,.2),f.addDirection(a.Pinky,o.DiagonalUpLeft,1),f.addDirection(a.Pinky,o.HorizontalLeft,.2),f.setWeight(a.Index,2),f.setWeight(a.Middle,2);var D=f;const m=new d(\"test\");m.addCurl(a.Thumb,r.HalfCurl,.5),m.addCurl(a.Thumb,r.NoCurl,.5),m.addDirection(a.Thumb,o.VerticalUp,1),m.addDirection(a.Thumb,o.DiagonalUpLeft,1),m.addCurl(a.Index,r.NoCurl,1),m.addDirection(a.Index,o.VerticalUp,.75),m.addDirection(a.Index,o.DiagonalUpLeft,1),m.addCurl(a.Middle,r.FullCurl,1),m.addDirection(a.Middle,o.VerticalUp,.2),m.addDirection(a.Middle,o.DiagonalUpLeft,1),m.addCurl(a.Ring,r.FullCurl,1),m.addDirection(a.Ring,o.VerticalUp,.2),m.addDirection(a.Ring,o.DiagonalUpLeft,1),m.addDirection(a.Ring,o.HorizontalLeft,.2),m.addCurl(a.Pinky,r.FullCurl,1),m.addDirection(a.Pinky,o.VerticalUp,.2),m.addDirection(a.Pinky,o.DiagonalUpLeft,1),m.addDirection(a.Pinky,o.HorizontalLeft,.2),m.setWeight(a.Index,2);var C=m;i.default={GestureEstimator:class{constructor(t,i={}){this.estimator=new l(i),this.gestures=t}estimate(t,i){let e=[];const n=this.estimator.estimate(t);let l=[];for(let t of a.all)l.push([a.getName(t),r.getName(n.curls[t]),o.getName(n.directions[t])]);for(let t of this.gestures){let a=t.matchAgainst(n.curls,n.directions);a>=i&&e.push({name:t.name,confidence:a})}return{poseData:l,gestures:e}}},GestureDescription:d,Finger:a,FingerCurl:r,FingerDirection:o,Gestures:n}}]).default}));","extractedComments":[]}